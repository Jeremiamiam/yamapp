---
phase: 11-refonte-page-client
plan: 00
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/proto/client-detail-v2/page.tsx
  - src/features/clients/components/ClientsList.tsx
  - src/features/clients/components/ClientDetail.tsx
autonomous: true
requirements: []

must_haves:
  truths:
    - "Page proto /proto/client-detail-v2 affiche le layout cible avec mock data"
    - "Layout proto : sidebar (contacts, liens, docs client, retro) + zone principale (projets + produits) + ProjectDrawer au clic"
    - "Bouton 'Voir proto' visible depuis ClientsList et/ou ClientDetail"
    - "Proto permet de valider le layout et les interactions avant migration"
  artifacts:
    - path: "src/app/proto/client-detail-v2/page.tsx"
      provides: "Page proto layout Phase 11 avec mock data"
  key_links:
    - from: "ClientsList / ClientDetail"
      to: "/proto/client-detail-v2"
      via: "bouton Voir proto"
      pattern: "Voir proto"
---

<objective>
Créer une page proto avec mock data pour prévisualiser le layout et les interactions de la refonte Phase 11. Accès via bouton "Voir proto" depuis les pages clients. Valider le design avant migration vers ClientDetail réelle.
</objective>

<execution_context>
@planning/PROJECT.md
@planning/ROADMAP.md
@planning/STATE.md
@planning/phases/11-*/11-CONTEXT.md
</execution_context>

<context>
# CONTEXT.md — Prototype pour validation layout
- Créer page proto avec mock data
- Accès : bouton "Voir proto" depuis fiche client ou liste clients
- Structure : sidebar (contacts, liens, documents client, retro) + zone principale (projets + produits) + ProjectDrawer au clic
- Référence existante : src/app/proto/projects/page.tsx (pattern proto avec mock data)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Créer page proto client-detail-v2</name>
  <files>
    src/app/proto/client-detail-v2/page.tsx
  </files>
  <action>
Créer `src/app/proto/client-detail-v2/page.tsx` :

**Mock data** : 1-2 clients avec contacts, liens, documents (client-level), projets, produits (deliverables), et retro planning minimal. Types alignés sur Client, Contact, ClientLink, ClientDocument, Project, Deliverable.

**Layout** (structure cible Phase 11) :
- Barre header : "Retour" (lien vers / ou ClientsList), nom client, badge statut, label "· proto"
- Flex row : sidebar gauche fixe (w-72 xl:w-80) + main flex-1
- Sidebar scrollable : sections Contacts, Liens, Documents (client only), Retro planning (Gantt simplifié ou placeholder)
- Main : section Projets (liste) + section Produits (groupés par projet)
- Clic sur un projet → ouvrir ProjectDrawer (panel slide-in droite) avec produits et documents du projet (mock)

**ProjectDrawer proto** : composant inline dans la page, pas le vrai ProjectDrawer — juste la structure (nom projet, liste produits, liste documents, bouton fermer). Mock data pour 1-2 projets.

Réutiliser les styles existants (var(--bg-primary), border-subtle, etc.). Pas de store Zustand — tout en local useState avec mock.
  </action>
  <verify>
Page /proto/client-detail-v2 accessible, layout sidebar + main visible, clic projet ouvre drawer.
  </verify>
  <done>
Proto page créée avec layout cible.
  </done>
</task>

<task type="auto">
  <name>Task 2: Bouton Voir proto depuis ClientsList et ClientDetail</name>
  <files>
    src/features/clients/components/ClientsList.tsx
    src/features/clients/components/ClientDetail.tsx
  </files>
  <action>
**ClientsList** :
- Ajouter un bouton "Voir proto" (ou lien) visible dans l'interface — ex. en haut de la grille ou dans un bandeau
- Lien : `router.push('/proto/client-detail-v2')` ou `<Link href="/proto/client-detail-v2">Voir proto</Link>`
- Style : discret, text-[10px] ou badge "proto" pour ne pas polluer l'UI principale

**ClientDetail** :
- Dans la barre contextuelle (header client), ajouter un bouton/lien "Voir proto" à côté du bouton Modifier
- Même destination : /proto/client-detail-v2

Les deux points d'entrée permettent d'accéder au proto depuis le contexte client.
  </action>
  <verify>
Voir proto visible dans ClientsList et ClientDetail, clic navigue vers proto.
  </verify>
  <done>
Accès proto configuré.
  </done>
</task>

</tasks>

<verification>
1. /proto/client-detail-v2 affiche layout sidebar + main + drawer
2. Mock data réaliste (contacts, liens, docs, projets, produits)
3. Clic projet ouvre ProjectDrawer proto
4. Bouton "Voir proto" dans ClientsList et ClientDetail
5. npx tsc --noEmit pass
</verification>

<success_criteria>
- Proto page complète et fonctionnelle
- Accès depuis pages clients
- Layout validable avant migration
</success_criteria>

<output>
After completion, create planning/phases/11-.../11-00-SUMMARY.md
</output>
